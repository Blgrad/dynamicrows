!function(e){e.fn.dynamicrows=function(t){function o(t){var o=e(t).closest(l.row);if(l.beforeAdd){var n=l.beforeAdd(o);if(n===!1)return!1}if(l.copyRow)var i=e(t).closest(l.rows).find(l.row+":nth-child("+l.copyRow+")").clone(!0);else var i=o.clone(!0);return 0==i.length?!1:(d(i,!0),l.copyValues&&a(o,i),e.fn.datepick&&e("input.datepicker",i).datepick("destroy").datepick(),i.insertAfter(o),r(),void(l.afterAdd&&l.afterAdd(i)))}function n(t){var o=e(t).closest(l.row);if(l.beforeRemove){var n=l.beforeRemove(o);if(n===!1)return!1}var a=e(o).closest(l.rows),i=e("> "+l.row,a).length;i>l.minrows?(o.remove(),r(),o=null):d(o),l.afterRemove&&l.afterRemove(o)}function r(){var t=/(.*?)(\[\d+?\])(?!\[\d+?\])(.*)/g,o=l.index_start-1;e("> "+l.row,l.rows).each(function(){o++,e(":input",this).each(function(){e(this).attr("name",function(e,n){return void 0===n?!0:n.replace(t,function(e,t,n,r){return t+"["+o+"]"+r})}).removeAttr("id")}),l.increment&&e(l.increment,this).html(o+1)})}function a(t,o){t.find(":text, textarea, select:not(multiple)").each(function(){var t=e(this),n=t.attr("name");o.find('[name="'+n+'"]').val(t.val())}),t.find(":checkbox, :radio").each(function(){var t=e(this),n=t.attr("name");o.find('[name="'+n+'"]').prop("checked",t.prop("checked"))})}function d(t,o){e(".disabled",t).removeClass("disabled"),e('input[type="hidden"]',t).val(""),o&&l.copyValues!==!1||(e(":text, textarea",t).val(""),e(":checkbox, :radio",t).prop("checked",!1),e("select option",t).removeAttr("selected").find(":first").prop("selected",!0))}var i=e(this),l=e.extend({row:"tr",rows:"tbody",minrows:1,copyRow:null,copyValues:!1,increment:null,handle_add:"[data-add]:not(.disabled)",handle_remove:"[data-remove]:not(.disabled)",handle_move:"[data-move]:not(.disabled)",index_start:0,beforeAdd:null,beforeRemove:null,beforeMove:null,afterAdd:null,afterRemove:null,afterMove:null},t),c=i.data();if("object"==typeof c&&e.each(c,function(e,t){"undefined"!=typeof l[e]&&("string"==typeof t&&0==t.length&&(t=!0),l[e]=t)}),l.rows=e(l.rows,this),l.handle_add&&i.on("click",l.handle_add,function(e){e.preventDefault(),o(this)}),l.handle_remove&&i.on("click",l.handle_remove,function(e){e.preventDefault(),n(this)}),l.handle_move&&e(l.handle_move,l.rows).length>0&&jQuery.fn.sortable){var f=[];e(l.handle_move,l.rows).each(function(){f.push(e(this).closest(l.row))}),e(l.rows,this).sortable({items:f,handle:l.handle_move,start:function(e,t){l.beforeMove&&l.beforeMove(t.item)},update:function(e,t){r(),l.afterMove&&l.afterMove(t.item)}})}}}(jQuery);